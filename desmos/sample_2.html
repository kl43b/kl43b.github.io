<!DOCTYPE html>
<html>
  <head>  
    <title>* DESMOS</title>
    <!--script>alert("~10s : library loading.\n\nGrid/polar at top right, keyboard + functions at bottom left.\n\nSupports BASE64 screenshots, etc.");</script-->

    <!-- demo API key -->
    <script id="mainAPI" src="https://www.desmos.com/api/v1.5/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script> 
	
	<script>
	  var loaded = false;
	  var local = false;
	  // https://stackoverflow.com/questions/21294/dynamically-load-a-javascript-file
	  //function isScriptLoaded(src){ return document.getElementById("mainAPI").src==src ? true:false;}
      // querySelector('script[src="' + src + '"]') ? true : false;}
	  function loadScript(url, callback) {
	    var head = document.getElementsByTagName('head')[0];
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = url;
        script.onreadystatechange = callback;
        script.onload = callback;
        head.appendChild(script);
      }
	  if(typeof Desmos == 'undefined') {
        loadScript('calculator_15.js', localAPI);
	  } else loaded = true;
	  /*if(isScriptLoaded("https://www.desmos.com/api/v1.3/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6")===false){
      } else loaded = true;*/
	  
	  function localAPI(){
	    local=true;
	    loaded=true;
	  }
	  
	</script>
	
	<link rel="stylesheet" href="style.css" />
    <script src="script.js"></script>
  </head>
  <body>
    <!-- docs https://www.desmos.com/api/v1.3/docs/index.html -->    
    <div id="calculator"></div> 
    <div id="left">
      <button onclick="getState()">^Dump&ndash;&gt;</button>
	  <button onclick="setState()">Load &ndash;&gt;^</button><br />
	  <button onclick="clearCalc()">Clear ^</button>
	  <button onclick="clearDebug()">Clear &ndash;&gt;</button><br />
      <button onclick="ss()">^ScrSht&ndash;&gt;</button>&nbsp;&nbsp;&nbsp;&nbsp;
	  <a href="https://www.desmos.com/api/v1.5/docs/index.html" target="_blank">docs</a><br />
    </div>
    <div id="right">
      <textarea rows=3 cols=40 id="debug"></textarea>  
	  <textarea rows=1 cols=1 id="rescue" hidden></textarea>
    </div>
<!-- Place JSON dumps ONLY inside the script tag (no code, comments, etc) -->
<script type="text/plain" id="preload">
{"version":7,"graph":{"viewport":{"xmin":-2.7235537406518464,"ymin":-0.5022101845197815,"xmax":4.939727163166299,"ymax":4.4983827088008494}},"randomSeed":"09380c0c72806152bf2c08e9e20f7321","expressions":{"list":[{"type":"folder","id":"2","title":"meta","collapsed":true},{"type":"text","id":"41","folderId":"2","text":"uuid: 3f650d2a-c169-4706-840f-049dde4bafc7"},{"type":"text","id":"53","folderId":"2","text":"Move the locator on ellipses / circle + special lines that zap coefficients to 0 just like h2 at extrema, roots, etc."},{"type":"text","id":"305","folderId":"2","text":"Author: Kirk Schafer"},{"type":"text","id":"207","text":"These translations use Pascal's Triangle to change coefficients without changing the locus"},{"type":"expression","id":"57","color":"#6042a6","latex":"h_{2}=0.5"},{"type":"expression","id":"59","color":"#c74440","latex":"i_{2}=3"},{"type":"text","id":"301","text":"======= Check depth at translation distance, in a circle (0=OFF). Invariant for circle; varies for ellipse (B <> 0) and off-center circle (C or E <> 0)."},{"type":"expression","id":"114","color":"#c74440","latex":"t_{heta}=0","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"359"}},{"type":"text","id":"113","text":"===== Depth in Z at locator 1; compare to locator 2. What the world calls the radius."},{"type":"expression","id":"78","color":"#2d70b3","latex":"d_{epthLocator1}=1"},{"type":"text","id":"303","text":"======= Normal translation: Moves entire graph."},{"type":"expression","id":"56","color":"#388c46","latex":"h_{1}=1"},{"type":"expression","id":"58","color":"#000000","latex":"i_{1}=2"},{"type":"text","id":"295","text":"===== Folders with things you can change."},{"type":"folder","id":"238","title":"Changeable COEF: Ax^2 + Bxy + Cx + Dy^2 + Ey = F","hidden":true,"collapsed":true},{"type":"expression","id":"217","folderId":"238","color":"#000000","latex":"A=1"},{"type":"expression","id":"211","folderId":"238","color":"#6042a6","latex":"B=0","hidden":true},{"type":"expression","id":"212","folderId":"238","color":"#000000","latex":"C=0","hidden":true},{"type":"expression","id":"218","folderId":"238","color":"#c74440","latex":"D=1"},{"type":"expression","id":"214","folderId":"238","color":"#2d70b3","latex":"E=0","hidden":true},{"type":"expression","id":"220","folderId":"238","color":"#388c46","latex":"F=-d_{epthLocator1}"},{"type":"folder","id":"235","title":"Special ellipse features (Enable, have B <> 0 then change C,E)","hidden":true,"collapsed":true},{"type":"text","id":"228","folderId":"235","text":"Extrema lines for x and y terms (the zeros of b_x2, b_y2). Apparently the same as partial derivatives."},{"type":"expression","id":"210","folderId":"235","color":"#388c46","latex":"z_{apx}=-\\frac{2}{B}x_{h1}-\\frac{C}{B}+i_{1}"},{"type":"expression","id":"280","folderId":"235","color":"#388c46","latex":"0=\\frac{d}{dx}f\\left(x_{h1},y_{i1},c_{oex},c_{oey},c_{oexy},d_{eg}\\right)","hidden":true,"lineStyle":"DOTTED"},{"type":"expression","id":"288","folderId":"235","color":"#388c46","latex":"b_{x2}"},{"type":"expression","id":"213","folderId":"235","color":"#c74440","latex":"z_{apy}=-\\frac{B}{2}x_{h1}-\\frac{E}{2}+i_{1}"},{"type":"expression","id":"281","folderId":"235","color":"#c74440","latex":"0=\\frac{d}{dy}f\\left(x_{h1},y_{i1},c_{oex},c_{oey},c_{oexy},d_{eg}\\right)","hidden":true,"lineStyle":"DOTTED"},{"type":"expression","id":"289","folderId":"235","color":"#6042a6","latex":"b_{y2}"},{"type":"text","id":"262","folderId":"235","text":"TODO: If locator at a point makes the sum of extrema lines zero...unknown purpose...in a cubic it would be the parabolic root/inflex; here it's what? "},{"type":"text","id":"222","folderId":"235","text":"Root lines for x and y terms (the zeroes of c_x2, c_y2)"},{"type":"text","id":"257","folderId":"235","text":"The sum of these lines is the ellipse, at z=0."},{"type":"expression","id":"216","folderId":"235","color":"#6042a6","latex":"0=Ax_{h1}^{2}+\\frac{Bx_{h1}y_{i1}}{2}+Cx_{h1}+\\frac{F}{2}","lineStyle":"DOTTED"},{"type":"expression","id":"219","folderId":"235","color":"#2d70b3","latex":"0=Dy_{i1}^{2}+\\frac{Bx_{h1}y_{i1}}{2}+Ey_{i1}+\\frac{F}{2}","lineStyle":"DOTTED"},{"type":"text","id":"293","folderId":"235","text":"The difference of these lines is hyperbolic through the crossover points on the perimeter::"},{"type":"expression","id":"291","folderId":"235","color":"#c74440","latex":"0=Ax_{h1}^{2}+\\frac{Bx_{h1}y_{i1}}{2}+Cx_{h1}+\\frac{F}{2}-\\left(Dy_{i1}^{2}+\\frac{Bx_{h1}y_{i1}}{2}+Ey_{i1}+\\frac{F}{2}\\right)"},{"type":"text","id":"240","folderId":"235","text":"If this is zero, you're at the extrema in both x and y (aka: \"the center\")."},{"type":"expression","id":"225","folderId":"235","color":"#c74440","latex":"c_{x2}+c_{y2}"},{"type":"expression","id":"299","color":"#c74440"},{"type":"text","id":"297","text":"============== Just support stuff below"},{"type":"folder","id":"55","title":"locator (main) + point displays"},{"type":"expression","id":"16","folderId":"55","color":"#2d70b3","latex":"d_{eg}=2","slider":{"hardMin":true,"hardMax":true,"min":"2","max":"2","step":"0"}},{"type":"expression","id":"75","folderId":"55","color":"#6042a6","latex":"\\left(h_{1},i_{1}\\right)","showLabel":true},{"type":"expression","id":"76","folderId":"55","color":"#000000","latex":"\\left(h_{2},i_{2}\\right)","showLabel":true},{"type":"expression","id":"91","folderId":"55","color":"#6042a6","latex":"\\left(h_{1},i_{1}\\right)","showLabel":true,"label":"`{${a_x}(x-${h_1})^2 + ${a_y}(y-${i_1})^2 + ${b_x}(x-${h_1}) + ${b_y}(y-${i_1}) = ${F}\\ \\ (Depth)}`","dragMode":"NONE"},{"type":"expression","id":"100","folderId":"55","color":"#000000","latex":"\\left(h_{2},i_{2}\\right)","showLabel":true,"label":"`{${a_{x2}}(x-${h_2})^2 + ${a_{y2}}(x-${i_2})^2 + ${b_{x2}}(x-${h_2}) + ${b_{y2}}(x-${i_2}) = ${d_epthLocator2}\\ \\ (Depth)}`","dragMode":"NONE"},{"type":"expression","id":"60","folderId":"55","color":"#2d70b3","latex":"x_{h1}=x-h_{1}","hidden":true},{"type":"expression","id":"62","folderId":"55","color":"#6042a6","latex":"x_{h2}=x-h_{2}","hidden":true},{"type":"expression","id":"64","folderId":"55","color":"#c74440","latex":"y_{i1}=y-i_{1}","hidden":true},{"type":"expression","id":"65","folderId":"55","color":"#2d70b3","latex":"y_{i2}=y-i_{2}","hidden":true},{"type":"folder","id":"7","title":"coe x","hidden":true,"collapsed":true},{"type":"expression","id":"10","folderId":"7","color":"#c74440","latex":"c_{oex}=\\left[a_{x},b_{x},c_{x}\\right]"},{"type":"expression","id":"42","folderId":"7","color":"#2d70b3","latex":"a_{x}=A","hidden":true},{"type":"expression","id":"43","folderId":"7","color":"#388c46","latex":"b_{x}=C","hidden":true},{"type":"expression","id":"44","folderId":"7","color":"#6042a6","latex":"c_{x}=\\frac{F}{2}","hidden":true},{"type":"folder","id":"46","title":"coe y","hidden":true,"collapsed":true},{"type":"expression","id":"47","folderId":"46","color":"#c74440","latex":"c_{oey}=\\left[a_{y},b_{y},c_{y}\\right]"},{"type":"expression","id":"48","folderId":"46","color":"#2d70b3","latex":"a_{y}=D","hidden":true},{"type":"expression","id":"49","folderId":"46","color":"#388c46","latex":"b_{y}=E","hidden":true},{"type":"expression","id":"50","folderId":"46","color":"#6042a6","latex":"c_{y}=\\frac{F}{2}","hidden":true},{"type":"folder","id":"67","title":"coe mixed vars (xy)","hidden":true,"collapsed":true},{"type":"expression","id":"51","folderId":"67","color":"#000000","latex":"c_{oexy}=B","slider":{"hardMin":true}},{"type":"folder","id":"69","title":"coe 2 (x and y)","hidden":true,"collapsed":true},{"type":"expression","id":"286","folderId":"69","color":"#c74440","latex":"c_{oex2}=\\left[a_{x2},b_{x2},c_{x2}\\right]"},{"type":"expression","id":"287","folderId":"69","color":"#2d70b3","latex":"c_{oey2}=\\left[a_{y2},b_{y2},c_{y2}\\right]"},{"type":"expression","id":"193","folderId":"69","color":"#2d70b3","latex":"h_{3}=h_{2}-h_{1}"},{"type":"expression","id":"194","folderId":"69","color":"#388c46","latex":"i_{3}=i_{2}-i_{1}"},{"type":"expression","id":"70","folderId":"69","color":"#000000","latex":"c_{oexTmp}=f_{coe}\\left(c_{oex},d_{eg},h_{1},h_{2}\\right)"},{"type":"expression","id":"71","folderId":"69","color":"#c74440","latex":"c_{oeyTmp}=f_{coe}\\left(c_{oey},d_{eg},i_{1},i_{2}\\right)"},{"type":"expression","id":"102","folderId":"69","color":"#2d70b3","latex":"a_{x2}=c_{oexTmp}\\left[1\\right]"},{"type":"expression","id":"103","folderId":"69","color":"#388c46","latex":"b_{x2}=c_{oexTmp}\\left[2\\right]+c_{oexy}i_{3}"},{"type":"expression","id":"104","folderId":"69","color":"#6042a6","latex":"c_{x2}=c_{oexTmp}\\left[3\\right]+\\frac{c_{oexy}h_{3}i_{3}}{2}"},{"type":"expression","id":"105","folderId":"69","color":"#000000","latex":"a_{y2}=c_{oeyTmp}\\left[1\\right]"},{"type":"expression","id":"106","folderId":"69","color":"#c74440","latex":"b_{y2}=c_{oeyTmp}\\left[2\\right]+c_{oexy}h_{3}"},{"type":"expression","id":"107","folderId":"69","color":"#2d70b3","latex":"c_{y2}=c_{oeyTmp}\\left[3\\right]+\\frac{c_{oexy}h_{3}i_{3}}{2}"},{"type":"expression","id":"72","folderId":"69","color":"#2d70b3","latex":"c_{oexy2}=c_{oexy}h_{3}i_{3}"},{"type":"expression","id":"83","folderId":"69","color":"#c74440","latex":"d_{epthLocator2}=c_{x2}+c_{y2}"},{"type":"folder","id":"18","title":"funcs (choose, pascal's triangle transform, f(x,y)","hidden":true,"collapsed":true},{"type":"expression","id":"33","folderId":"18","color":"#2d70b3","latex":"T\\left(n,r\\right)=\\frac{n!}{r!\\left(n-r\\right)!}"},{"type":"expression","id":"34","folderId":"18","color":"#388c46","latex":"f_{coe}\\left(c_{oe},d_{g},h_{old},h_{new}\\right)=\\sum_{n=0}^{\\left[0,...d_{g}\\right]}T\\left(d_{g}-n,\\left[0,...d_{g}\\right]-n\\right)c_{oe}\\left[n+1\\right]\\left(h_{new}-h_{old}\\right)^{\\left(\\left[0,...d_{g}\\right]-n\\right)}"},{"type":"expression","id":"19","folderId":"18","color":"#6042a6","latex":"f\\left(x,y,x_{s},y_{s},c_{xy},d_{g}\\right)=\\sum_{n=0}^{d_{g}}\\left(x_{s}\\left[n+1\\right]x^{\\left(d_{g}-n\\right)}+y_{s}\\left[n+1\\right]y^{\\left(d_{g}-n\\right)}\\right)+c_{xy}xy"},{"type":"folder","id":"118","title":"rotation of second locator (via theta)","collapsed":true},{"type":"expression","id":"120","folderId":"118","color":"#fa7e19","latex":"\\left(x-h_{1}\\right)^{2}+\\left(y-i_{1}\\right)^{2}=h_{3}^{2}+i_{3}^{2}\\left\\{t_{heta}>0\\right\\}","lineStyle":"DASHED"},{"type":"expression","id":"116","folderId":"118","color":"#388c46","latex":"r_{0}=\\frac{-\\pi}{180}t_{heta}","polarDomain":{"min":"","max":"12\\pi"}},{"type":"expression","id":"121","folderId":"118","color":"#2d70b3","latex":"x_{rot}=\\cos\\left(r_{0}\\right)h_{3}+\\ i_{3}\\sin\\left(r_{0}\\right)+h_{1}"},{"type":"expression","id":"122","folderId":"118","color":"#388c46","latex":"y_{rot}=-\\sin\\left(r_{0}\\right)h_{3}+\\cos\\left(r_{0}\\right)i_{3}+i_{1}"},{"type":"expression","id":"196","folderId":"118","color":"#000000","latex":"h_{r}=x_{rot}-h_{1}"},{"type":"expression","id":"197","folderId":"118","color":"#c74440","latex":"i_{r}=y_{rot}-i_{1}"},{"type":"expression","id":"124","folderId":"118","color":"#000000","latex":"c_{oexr}=f_{coe}\\left(c_{oex},d_{eg},h_{1},x_{rot}\\right)"},{"type":"expression","id":"125","folderId":"118","color":"#c74440","latex":"c_{oeyr}=f_{coe}\\left(c_{oey},d_{eg},i_{1},y_{rot}\\right)"},{"type":"expression","id":"126","folderId":"118","color":"#2d70b3","latex":"a_{xr}=c_{oexr}\\left[1\\right]"},{"type":"expression","id":"127","folderId":"118","color":"#388c46","latex":"b_{xr}=c_{oexr}\\left[2\\right]+c_{oexy}i_{r}"},{"type":"expression","id":"128","folderId":"118","color":"#6042a6","latex":"c_{xr}=c_{oexr}\\left[3\\right]+\\frac{c_{oexy}h_{r}i_{r}}{2}"},{"type":"expression","id":"129","folderId":"118","color":"#000000","latex":"a_{yr}=c_{oeyr}\\left[1\\right]"},{"type":"expression","id":"130","folderId":"118","color":"#c74440","latex":"b_{yr}=c_{oeyr}\\left[2\\right]+c_{oexy}h_{r}"},{"type":"expression","id":"131","folderId":"118","color":"#2d70b3","latex":"c_{yr}=c_{oeyr}\\left[3\\right]+\\frac{c_{oexy}h_{r}i_{r}}{2}"},{"type":"expression","id":"195","folderId":"118","color":"#6042a6","latex":"d_{epthLocatorR}=c_{xr}+c_{yr}"},{"type":"expression","id":"115","folderId":"118","color":"#2d70b3","latex":"\\left(x_{rot},y_{rot}\\left\\{t_{heta}>0\\right\\}\\right)","showLabel":true},{"type":"expression","id":"123","folderId":"118","color":"#6042a6","latex":"\\left(x_{rot},y_{rot}\\left\\{t_{heta}>0\\right\\}\\right)","showLabel":true,"label":"`{${a_{xr}}(x-${h_2})^2 + ${a_{yr}}(x-${i_2})^2 + ${b_{xr}}(x-${h_2}) + ${b_{yr}}(x-${i_2}) = ${d_epthLocatorR}\\ \\ (Depth)}`"},{"type":"folder","id":"86","title":"calls (original, then updated coefficients)","collapsed":true},{"type":"expression","id":"17","folderId":"86","color":"#6042a6","latex":"0=f\\left(x_{h1},y_{i1},c_{oex},c_{oey},c_{oexy},d_{eg}\\right)"},{"type":"expression","id":"159","folderId":"86","color":"#388c46","latex":"0=f\\left(x_{h2},y_{i2},c_{oex2},c_{oey2},c_{oexy},d_{eg}\\right)","lineStyle":"DOTTED"},{"type":"folder","id":"264","title":"Special ellipse ... (data) TODO","hidden":true,"collapsed":true},{"type":"text","id":"267","folderId":"264","text":"TODO: Note from above folder: If locator at a point makes the sum of extrema lines zero...there are some anomalous lines here, need to map them out in data."},{"id":"251","type":"table","folderId":"264","columns":[{"values":["-\\frac{1}{2}","1","1.5"],"hidden":true,"id":"249","color":"#6042a6","latex":"x_{4}"},{"values":["\\frac{11}{2}","4","3.5"],"id":"250","color":"#000000","latex":"y_{4}"}]},{"type":"expression","id":"272","folderId":"264","color":"#2d70b3","latex":"y_{4}\\sim ax_{4}+b","hidden":true,"residualVariable":"e_{4}","regressionParameters":{"a":-1,"b":5}},{"type":"expression","id":"247","folderId":"264","color":"#2d70b3","latex":"b_{x2}+b_{y2}"}]}}</script>

  </body>
</html>